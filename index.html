<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>- Gestión360°: control total de activos, insumos e información técnica.</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link
        href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Montserrat:wght@300;400;500;600;700;800&family=Satisfy&display=swap"
        rel="stylesheet">

    <style>
        body {
            /* FUENTE CORREGIDA (según Manual de Marca) */
            font-family: 'Montserrat', sans-serif;
            background-color: #f3f4f6;
            /* gray-100 */
        }

        .step {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .step.active {
            background-color: #dc2626;
            /* red-600 */
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        .step.active .step-number {
            background-color: white;
            color: #dc2626;
            /* red-600 */
        }

        .step-line {
            height: 2px;
            background-color: #d1d5db;
            /* gray-300 */
        }

        .detail-card {
            transition: all 0.4s ease-in-out;
        }

        .step-sub.active {
            background-color: #dc2626;
            /* red-600 */
            color: white;
            font-weight: 600;
        }

        /* === Davo patch: ocultar números de pasos y ajustar títulos === */
        .step-number {
            display: none !important;
        }

        /* TÍTULOS DE STEP (según Manual de Marca) */
        .step h3 {
            font-family: 'Abril Fatface', serif;
            font-weight: 400;
            font-size: 1.125rem;
            /* 18px */
            letter-spacing: 0.5px;
            margin-top: 0;
        }

        /* === ESTILOS NUEVOS DE MARCA === */
        .brand-tagline {
            font-family: 'Satisfy', cursive;
            font-size: 1.5rem;
            /* 24px */
            color: #333;
            /* Un gris oscuro, como en la guía */
            margin-top: -10px;
            /* Ajuste para que quede pegado al logo */
            margin-left: 8px;
            /* Pequeño ajuste visual */
        }

        .text-brand-green {
            color: #698E28 !important;
            /* El Verde Pantone 368 C oficial */
        }

        /* === FIN DE ESTILOS NUEVOS === */

        /* Davo: preguntas sin viñeta + separador sutil (subtítulo) */
        .dv-question-subtitle {
            list-style-type: none !important;
            margin-top: 0.75rem;
            /* mt-3 */
            padding-top: 0.5rem;
            /* pt-2 */
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            /* separador sutil */
            font-weight: 600;
            /* semi-bold */
            color: #111827;
            /* gray-900 */
        }

        @media (prefers-color-scheme: dark) {
            .dv-question-subtitle {
                border-color: rgba(255, 255, 255, 0.18);
            }
        }
    </style>

    <style>
        :root {
            /* COLOR CORREGIDO (Pantone 485 C / RGB 227, 6, 29) */
            --brand-red: #E3061D;
        }
    </style>
    <style id="davoo-brand-tokens">
        :root {
            /* --brand-red: #C3181E; */
            /* <-- Duplicado y corregido arriba */
            --brand-red-700: #881015;
            /* El manual no especifica un 700, pero lo dejamos */
            --brand-gray: #58595B;
            --text: #111827;
            --surface: #ffffff;
            --border: #E5E7EB;
        }

        body {
            color: var(--text);
            font-variant-numeric: tabular-nums;
        }

        .marker-brand ::marker {
            color: var(--brand-red);
        }

        .btn-primary {
            background: var(--brand-red) !important;
            color: #fff !important;
        }

        .btn-primary:hover {
            filter: brightness(.95);
        }

        .step.active {
            background: var(--brand-red);
            color: #fff;
        }

        .step.active .step-number {
            background: #fff;
            color: var(--brand-red);
        }
    </style>
</head>

<body class="antialiased text-gray-800">

    <div class="mx-6 my-4" style="display:inline-block; filter: drop-shadow(0 14px 28px rgba(195,24,30,.35));">
        <svg width="160" height="64" viewBox="0 0 160 64" fill="none" xmlns="http://www.w3.org/2000/svg" role="img"
            aria-label="DIA">
            <defs>
                <linearGradient id="g" x1="0" y1="0" x2="160" y2="0" gradientUnits="userSpaceOnUse">
                    <stop offset="0%" stop-color="#C3181E" />
                    <stop offset="100%" stop-color="#881015" />
                </linearGradient>
            </defs>
            <rect x="0" y="0" width="160" height="64" rx="16" fill="url(#g)" />
            <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle"
                font-family="Montserrat, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial"
                font-size="28" font-weight="700" fill="#FFFFFF" letter-spacing="0.5">
                DIA
            </text>
        </svg>
    </div>
    <p class="brand-tagline" style="margin-left: 1.5rem; margin-top: -15px;">Cada día más cerca</p>
    <div class="container mx-auto p-4 sm:p-6 md:p-12">
        <header class="text-center mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Gestión 360° - SSGG</h1>
            <p class="text-gray-800 max-w-2xl mx-auto">Transformamos la gestión operativa y documental en una
                experiencia digital, trazable y conectada a todo el sector.</p>
        </header>

        <main>
            <section class="mb-12 bg-white p-6 rounded-xl shadow-md border-l-4 border-[var(--brand-red)]">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <span
                            class="inline-flex justify-center items-center w-8 h-8 rounded-full bg-[var(--brand-red)] text-white font-bold text-xl">!</span>
                    </div>
                    <div class="ml-4">
                        <div class="mb-3 flex flex-col md:flex-row md:items-center md:gap-3">
                            <h2 class="text-xl font-bold text-gray-900 m-0">
                                ¿Por qué surge la gestión 360° – SSGG?
                            </h2>
                            <span
                                class="inline-block font-semibold text-[var(--brand-gray)] text-lg tracking-tight md:pl-3 md:border-l md:border-gray-400">
                                Porque la gestión comienza cuando la realidad se vuelve visible.
                            </span>
                        </div>

                        <ul
                            class="text-gray-800 leading-7 list-disc marker-brand pl-6 space-y-2 marker:text-[var(--brand-red)]">
                            <li>No se sabía con precisión dónde estaban los activos.</li>
                            <li>No había trazabilidad de técnicos, stock ni documentación.</li>
                            <li>Las áreas estaban desconectadas y los datos fragmentados.</li>
                            <li>Las tiendas no contaban con respuestas ágiles ni soporte adecuado.</li>
                        </ul>
                        <div class="mt-4 text-center md:text-left">
                            <span class="font-bold text-[var(--brand-gray)]">
                                Gestión 360° integra todo: activos, técnicos, indicadores y documentación en plataformas
                                digitales, trazables y transversales.
                            </span>
                        </div>


                    </div>
                </div>
            </section>


            <div class="mb-12">
                <div class="flex flex-col md:flex-row justify-between items-center relative">
                    <div id="step-1" data-step="1"
                        class="step w-full md:w-1/4 p-4 rounded-lg bg-white shadow-md border border-gray-200 text-center mb-4 md:mb-0 z-10">
                        <h3 class="font-semibold">Chatbot de Mantenimiento</h3>
                    </div>
                    <div class="step-line w-full absolute top-1/2 left-0 hidden md:block"></div>
                    <div id="step-4" data-step="4"
                        class="step w-full md:w-1/4 p-4 rounded-lg bg-white shadow-md border border-gray-200 text-center mb-4 md:mb-0 z-10 mx-0 md:mx-4">
                        <h3 class="font-semibold">Info Nacional</h3>
                    </div>
                    <div class="step-line w-full absolute top-1/2 left-0 hidden md:block"></div>
                    <div id="step-6" data-step="6"
                        class="step w-full md:w-1/4 p-4 rounded-lg bg-white shadow-md border border-gray-200 text-center z-10">
                        <h3 class="font-semibold">Gestock</h3>
                    </div>
                    <div class="step-line w-full absolute top-1/2 left-0 hidden md:block"></div>
                    <div id="step-8" data-step="8"
                        class="step w-full md:w-1/4 p-4 rounded-lg bg-white shadow-md border border-gray-200 text-center z-10 md:ml-4">
                        <h3 class="font-semibold">TECNICOS INTERNOS</h3>
                    </div>

                </div>
            </div>

            <div id="sub-step-container" class="w-full flex flex-wrap justify-center gap-2 mt-4 mb-8">
            </div>


            <div id="detail-card"
                class="detail-card bg-white p-6 md:p-8 rounded-xl shadow-lg min-h-[300px] flex flex-col md:flex-row gap-8">
                <div class="w-full md:w-1/3">
                    <h2 id="detail-phase" class="text-sm font-semibold uppercase text-[var(--brand-red)] mb-2">Fase</h2>
                    <h3 id="detail-title" class="text-2xl font-bold text-gray-900 mb-4">Título del Paso</h3>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <p class="text-sm font-medium text-gray-500 mb-1">Responsable(s):</p>
                        <p id="detail-role" class="font-semibold text-gray-800">Rol</p>
                        <div id="audience-row" class="mt-3">
                            <p class="text-sm font-medium text-gray-500 mb-1">Usuarios:</p>
                            <p id="detail-audience" class="text-gray-800">—</p>
                        </div>
                    </div>
                    <div id="detail-link-block" class="mt-6">
                        <a id="detail-link-anchor" href="#" target="_blank" rel="noopener"
                            class="inline-flex w-full items-center justify-center px-6 py-4 rounded-xl border-2 border-gray-300 text-gray-800 hover:border-[var(--brand-red)] hover:shadow-md transition">
                            <span class="font-medium">Abrir enlace</span>
                        </a>
                    </div>
                </div>
                <div class="w-full md:w-2/3">
                    <p class="text-sm font-medium text-gray-500 mb-2">⚡ Impacto:</p>
                    <ul id="detail-actions" class="list-disc marker-brand list-inside space-y-2 text-gray-700">
                        <li>Acción 1</li>
                    </ul>
                </div>
            </div>
            <p class="text-center text-xs text-gray-400 mt-4">Haz clic en un número para ver los detalles de ese paso.
            </p>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const stepsDataRaw = [
                { id: 1, title: 'Implementación del CAT', phase: 'Punto de Partida: Empezar a migrar al mundo digital', role: 'David Diaz ➔ Lider del proceso', actions: ['Consultas operativas sin demora.', 'Solicitud de servicios generales sin intermediarios.', 'Acceso ágil a información técnica y documental.', 'Automatización de mails para acelerar procesos.', 'Es el primer punto de contacto digital: conecta al usuario con el sistema, agiloza la gestión y deja registro trazable.'] },
                { id: 2, title: '2. Solicitud de Presupuesto', phase: 'Fase 1: Inicio y Presupuesto', role: 'Agente', actions: ['Solicita un presupuesto formal y detallado del trabajo a realizar en caso de que no se haya podido solucionar por urgencia.'] },
                { id: 3, title: '3. Adjuntar Presupuesto', phase: 'Fase 1: Inicio y Presupuesto', role: 'Agente', actions: ['Recibe el presupuesto del proveedor.', 'Sube y adjunta el documento al ticket para registrar el costo.', '<strong class="text-[var(--brand-red)]">IMPORTANTE:</strong> Adjuntar siempre como comentario interno para evitar que la tienda vea los costos.'] },
                {
                    id: 4,
                    title: 'Implementación del Info Nacional',
                    phase: 'Fase 2: El ADN digital de cada tienda',
                    role: 'David Diaz ➔ Creador de la pagina web Info Nacional',
                    actions: [
                        'Reportes del presupuesto interno en mantenimiento.',
                        'Reportes de las tiendas cerradas.',
                        'Reportes de las actas.',
                        'Reportes del control de plagas.',
                        'Reportes del control de (GE).',
                        'Reportes del cronograma de tecnicos.',
                        'Reportes de los planes Frío y Civil.',
                        'Reportes del NPS del contact Center y tecnicos internos.',
                        'Reportes del aplicativo GESTOCK.',
                        '¿En qué impacta esto?',
                        // === VERDE OFICIAL APLICADO ===
                        '<strong class="text-brand-green">Visibilidad total por tienda:</strong> Permite al equipo de Mantenimiento y Operaciones tener una visión completa y actualizada del estado de cada tienda, facilitando la toma de decisiones informadas.',
                        'Trazabilidad en tiempo real.',
                        'Reducción de errores y tiempos de respuesta.',
                    ]
                },
                {
                    id: 5,
                    title: '5. Validación del dpto. de Compras',
                    phase: 'Fase 2: Circuito de Aprobaciones',
                    role: 'Agente ➔ Compras',
                    actions: [
                        'Una plataforma que centraliza toda la información técnica, documental y operativa de cada tienda.',
                        '<strong class="text-green-600 mt-2 block">Si Compras aprueba el costo:</strong> Se solicita a Administración avanzar con el proceso interno y al proveedor iniciar el trabajo (ver paso 6).', // (Dejamos este verde por ser semántico de "aprobado")
                        '<strong class="text-[var(--brand-red)] mt-2 block">Si Compras rechaza el valor:</strong> Se debe aguardar a que Compras renegocie los costos con el proveedor.',
                        '<strong class="text-[var(--brand-red)] font-bold mt-2 block">(Sin excepción, no se puede avanzar nada sin el OK del costo de Compras).</strong>',
                        '<strong class="text-[var(--brand-red)] font-bold mt-2 block">(IMPORTANTE: En el proceso de aprobación interno, el proveedor no debe estar en copia. El agente externo no debe saber bajo qué punto presupuestario (CAPEX/OPEX) se avanzará con el gasto).</strong>'
                    ]
                },
                {
                    id: 6,
                    title: 'Insumos y Activos',
                    phase: 'Fase 3: Control de activos e insumos con GESTOCK',
                    role: 'Jonathan Ferro ➔ Creador del aplicativo GESTOCK',
                    actions: [
                        '¿Qué gestiona?',
                        'Visualización de activos con localización  y estado operativo',
                        'Control del pañol de Servicios Generales',
                        'Registro de entregas en consignación',
                        'Trazabilidad de trabajos técnicos en tiendas',
                        '<strong>Activos en puesta de valor.</strong>',
                        '¿En qué impacta esto?',
                        // === VERDE OFICIAL APLICADO ===
                        '<strong class="text-brand-green">Optimización del stock y recursos:</strong> Permite una gestión eficiente del stock de insumos y activos, reduciendo costos y mejorando la disponibilidad de recursos.',
                        'Mejora en la planificación y ejecución de mantenimientos.',
                        '100% trazabilidad de activos.',
                        'Mejora en eficiencia operativa y control técnico.'
                    ]
                },
                {
                    id: 8,
                    title: 'TECNICOS INTERNOS - GESTION 360° SSGG',
                    phase: 'Fase 4: Mantenimiento y Mejora Proactiva',
                    role: 'Patricio Varela  ➔ Lider',
                    actions: [
                        '¿Qué gestiona?',
                        'CABA y GBA 9 camionetas (11 técnicos) + PBA y INT 6 camionetas ( 6 técnicos)',
                        '¿Como se ejecuta la operativa en CABA y GBA?',
                        'Asistencia a Tiendas: 5 Camionetas + 5 técnicos',
                        'Control de plagas: 1 Camioneta + 1 técnico',
                        'Entrega de balanzas: 1 Camioneta + 2 técnicos ',
                        'Reactivaciónes: 1 Camioneta + 1 técnicos',
                        '<strong>Limpieza: 1 Camioneta + 2 técnicos</strong>',
                        '¿Como se ejecuta la operativa en PBA y INT?',
                        'Asistencia a Tiendas: 6 Camionetas + 6 técnicos',
                        '<strong>Corredor turístico MDQ 10-11</strong>',
                        '<strong>Corredor turístico Entre rios 1-12</strong>',
                    ]
                },
                { id: 7, title: '7. Cierre del Ticket', phase: 'Fase 3: Ejecución y Cierre', role: 'Proveedor ➔ Agente', actions: ['El Proveedor finaliza el trabajo en la ubicación.', 'Adjunta el remito o informe final de conformidad al ticket.', 'El Agente verifica la documentación, confirma la solución y procede al cierre formal del ticket.'] }
            ];

            const stepsData = stepsDataRaw.filter(s => [1, 4, 6, 8].includes(s.id));
            const stepElements = document.querySelectorAll('.step');
            const detailPhase = document.getElementById('detail-phase');
            const detailTitle = document.getElementById('detail-title');
            const detailRole = document.getElementById('detail-role');
            const detailActions = document.getElementById('detail-actions');
            const detailCard = document.getElementById('detail-card');
            const subStepContainer = document.getElementById('sub-step-container');
            const audienceRow = document.getElementById('audience-row');
            const detailAudience = document.getElementById('detail-audience');
            const stepAudienceMap = {
                1: 'Tiendas · Contact Center · Gerentes de Ventas',
                4: 'Contact Center · Tecnicos · Gerentes de Ventas · Auditores internos · Equipo de Mantenimiento',
                6: 'Equipo de Mantenimiento ',
                8: 'Gabriel Velazo · Coordinador'
            };
            const detailLinkBlock = document.getElementById('detail-link-block');
            const detailLinkAnchor = document.getElementById('detail-link-anchor');

            // Davo: crear bloque "Ver fotos" debajo del CTA principal
            const detailPhotosBlock = document.createElement('div');
            detailPhotosBlock.id = 'detail-photos-block';
            detailPhotosBlock.className = 'mt-2 hidden'; // Empezar oculto

            // ORDEN DE BOTONES CORREGIDO
            detailPhotosBlock.innerHTML = `<a id="detail-photos-anchor" href="#" target="_blank" rel="noopener"
                class="inline-flex w-full items-center justify-center px-6 py-4 rounded-xl border-2 border-gray-300 text-gray-800 hover:border-[var(--brand-red)] hover:shadow-md transition">
                <span class="font-medium">Ver Flyer WhatsApp</span>
              </a>`;

            detailLinkBlock.insertAdjacentElement('afterend', detailPhotosBlock);
            const detailPhotosAnchor = detailPhotosBlock.querySelector('#detail-photos-anchor');

            // ORDEN DE LINKS Y TEXTOS CORREGIDO
            const repoBaseUrl = 'https://daviddia2.github.io/PRESENTACION/';

            // === DAVO: AQUÍ SE AGREGA EL BOTÓN PARA EL STEP 8 ===
            const stepLinkMap = {
                1: repoBaseUrl + 'flyer-lanzamiento.jpg', // Botón 1 (Lanzamiento)
                4: 'https://daviddia2.github.io/INFO-VF',
                6: 'https://www.appsheet.com/Account/Login?appName=Gestock%20DIA&FullScope=False&provider=google&returnUrl=https%3A%2F%2Fwww.appsheet.com%2Fstart%2Fdb447f85-4531-4d25-bf60-52bc322a70ec%3Fplatform%3Ddesktop#appName=NewApp-925466678-25-08-28&vss=H4sIAAAAAAAAA6WQsQrCMBCGX0Vu7lAnIat0ENFBxcV0iMlVgjUpTWotIe_uxSq6quP9x_fdzwW4auy3XsgzsEN4T0scgEHgsBsa5MA4zK3xra05ZBzW4jKGhZlQ7vTJCA4RYpm9FB4dsPC1gf3dIQOt0HhdaWyTLsGkeaK0TiAFHxjEDC6dF8caH80TtrH9eD_PKzHDqSTSYY3So6JXlTESVFnZOVR7avxbU7cwxa0RRq2sorOVqB3GO6x3rXyVAQAA&row=00fae1f&view=En%20Consigna',

                // ===== NOMBRE CORREGIDO (con L) =====
                8: repoBaseUrl + 'MailTec.jpg'
                // =====================================
            };
            const stepLinkTextMap = {
                1: 'Ver Flyer Lanzamiento', // Texto Botón 1
                4: 'Abrir Info Nacional',
                6: 'Abrir Gestock',
                8: 'Ver Foto (Técnicos)' // (El texto sigue igual)
            };
            // =================================================

            // Enlaces para el SEGUNDO botón
            const stepPhotosMap = {
                1: repoBaseUrl + 'flyer-whatsapp.jpg', // Botón 2 (WhatsApp)
                4: '',
                6: ''
                // (Step 8 no usa este slot, así que queda vacío y se oculta)
            };

            // LINKS INLINE (tal como estaban en tu archivo)
            const apvLinkMap = { 6: 'https://docs.google.com/document/d/12pGrJrSt0oCF-S7XSuQgwIFLf8NIqZ0NGmY12Lq95fI/edit?usp=sharing' };
            const cleanLinkMap = { 8: 'https://docs.google.com/document/d/1pfZBMpgFLBdgPeDkfuNLTWn_WZZoHzW8ENOJeIO8BW0/edit?usp:sharing' };



            function updateDetails(stepId) {
                const stepData = stepsData.find(s => s.id === stepId);
                if (!stepData) return;

                detailCard.style.opacity = '0';
                detailCard.style.transform = 'translateY(10px)';

                setTimeout(() => {
                    detailPhase.textContent = stepData.phase;
                    detailTitle.textContent = stepData.title;
                    detailRole.textContent = stepData.role;
                    const _aud = (stepAudienceMap[stepId] || (stepData.audience || '')).trim();
                    if (_aud) { detailAudience.textContent = _aud; audienceRow && (audienceRow.style.display = ''); } else { audienceRow && (audienceRow.style.display = 'none'); }

                    // Botón 1 (Principal)
                    // Esta lógica ahora funciona para 1, 4, 6, y 8
                    const _link = stepLinkMap[stepId];
                    if (_link) {
                        detailLinkAnchor.href = _link;
                        detailLinkAnchor.querySelector('span').textContent = stepLinkTextMap[stepId] || 'Abrir enlace';
                        detailLinkBlock && detailLinkBlock.classList.remove('hidden');
                    } else {
                        detailLinkBlock && detailLinkBlock.classList.add('hidden');
                    }

                    // Botón 2 (Secundario)
                    // Esta lógica ahora funciona solo para el Step 1
                    const _photosLink = (stepPhotosMap[stepId] || '').trim();
                    if (_photosLink) {
                        detailPhotosAnchor.href = _photosLink;
                        detailPhotosBlock.classList.remove('hidden'); // Mostrarlo
                    } else {
                        detailPhotosBlock.classList.add('hidden'); // Ocultarlo
                    }

                    // Limpiar el panel derecho
                    detailActions.innerHTML = '';

                    // Volver a dibujar los bullet points
                    stepData.actions.forEach(action => {
                        const li = document.createElement('li');
                        li.innerHTML = action;

                        // Quitar viñeta y agregar separador sutil si es pregunta (¿ ... ?)
                        const text = (li.textContent || '').trim();
                        if (/^¿.*\?$/.test(text)) {
                            li.classList.add('dv-question-subtitle');
                        }

                        // Normalizar el texto para buscar
                        const plain = text.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();

                        // Si el item es "Activos en puesta de valor", agregamos el botón inline
                        const apvLink = (apvLinkMap[stepId] || '').trim();
                        if (apvLink && plain.includes('activos en puesta de valor')) {
                            const a = document.createElement('a');
                            a.href = apvLink;
                            a.target = '_blank';
                            a.rel = 'noopener';
                            a.className = 'ml-3 inline-flex items-center px-3 py-1.5 rounded-lg border border-[var(--brand-red)] text-[var(--brand-red)] text-xs font-semibold hover:bg-[var(--brand-red)] hover:text-white transition';
                            a.textContent = 'Fotos de activo puesta en valor';
                            li.appendChild(a);
                        }


                        // Si el item menciona "Limpieza: 1 Camioneta + 2 técnicos", agregamos botón inline
                        const cleanLink = (cleanLinkMap[stepId] || '').trim();
                        if (cleanLink && plain.includes('limpieza') && (plain.includes('camioneta') || plain.includes('tecnicos'))) {
                            const b = document.createElement('a');
                            b.href = cleanLink;
                            b.target = '_blank';
                            b.rel = 'noopener';
                            b.className = 'ml-3 inline-flex items-center px-3 py-1.5 rounded-lg border border-[var(--brand-red)] text-[var(--brand-red)] text-xs font-semibold hover:bg-[var(--brand-red)] hover:text-white transition';
                            b.textContent = 'Fotos de limpieza';
                            li.appendChild(b);
                        }
                        detailActions.appendChild(li);
                    });
                    detailCard.style.opacity = '1';
                    detailCard.style.transform = 'translateY(0)';
                }, 200);

                stepElements.forEach(el => {
                    const elStepId = parseInt(el.dataset.step, 10);
                    let masterStepId;
                    if (stepId <= 3) masterStepId = 1;
                    else if (stepId <= 5) masterStepId = 4;
                    else if (stepId <= 7) masterStepId = 6;
                    else masterStepId = 8;

                    if (elStepId === masterStepId) {
                        el.classList.add('active');
                    } else {
                        el.classList.remove('active');
                    }
                });

                document.querySelectorAll('.step-sub').forEach(s => {
                    s.classList.remove('active');
                    if (parseInt(s.dataset.step) === stepId) {
                        s.classList.add('active');
                    }
                });
            }

            // === ESTA ES LA LÍNEA CORREGIDA ===
            stepsData.forEach((step, idx) => {
                // ==================================
                const subStep = document.createElement('div');
                subStep.dataset.step = step.id;
                subStep.textContent = (idx + 1);
                subStep.className = 'step-sub w-10 h-10 flex items-center justify-center rounded-full bg-gray-200 hover:bg-red-200 cursor-pointer transition';
                subStep.addEventListener('click', (e) => {
                    const id = parseInt(e.target.dataset.step, 10);
                    updateDetails(id);
                });
                subStepContainer.appendChild(subStep);
            });

            stepElements.forEach(step => {
                step.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.dataset.step, 10);
                    updateDetails(id);
                });
            });

            // Initial state
            updateDetails(1);
        });
    </script>
</body>

</html>